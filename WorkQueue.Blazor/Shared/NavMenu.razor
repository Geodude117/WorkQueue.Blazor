
@using Data
@using RestSharp
@using DomainData.Models


<MatNavMenu>
    <MatNavSubMenu>
        <MatNavSubMenuHeader>
            <MatNavItem Href="" AllowSelection="true"><MatIcon Icon="toc"></MatIcon>&nbsp;List</MatNavItem>
        </MatNavSubMenuHeader>
        <MatNavSubMenuList>
            @if (domainGroup != null)
            {
                @foreach (var group in domainGroup)
                {
                    <MatNavItem Href="@($"QueueComponent/{group.ExternalReferenceId}/{group.GroupName}")"><MatIcon Icon="table_view"></MatIcon>&nbsp; @group.GroupName</MatNavItem>
                }
            }
        </MatNavSubMenuList>
    </MatNavSubMenu>

    <MatNavSubMenu>
        <MatNavSubMenuHeader>
            <MatNavItem Href="" AllowSelection="true"><MatIcon Icon="create"></MatIcon>&nbsp;Create</MatNavItem>
        </MatNavSubMenuHeader>
        <MatNavSubMenuList>
            @if (domainGroup != null)
            {
                @foreach (var group in domainGroup)
                {
                    <MatNavItem Href="@($"QuestionSet/{group.Id}")"><MatIcon Icon="dynamic_form"></MatIcon>&nbsp;@group.GroupName</MatNavItem>
                }
            }
        </MatNavSubMenuList>
    </MatNavSubMenu>

</MatNavMenu>


@code {
    private bool collapseNavMenu = true;

    private string NavMenuCssClass => collapseNavMenu ? "collapse" : null;

    private void ToggleNavMenu()
    {
        collapseNavMenu = !collapseNavMenu;
    }

    private IEnumerable<DomainGroup> domainGroup;

    protected override void OnInitialized()
    {
        var client = new RestClient("http://localhost:52388/");
        var request = new RestRequest("api/DomainData/", Method.GET);
        var queryResult = client.Execute<List<DomainGroup>>(request).Data;

        domainGroup = (IEnumerable<DomainGroup>)queryResult;

        this.StateHasChanged();
    }

}
